FROM node:12-alpine
#WORKDIR /app
COPY . .
#RUN mkdir tmp
RUN apk add --no-cache build-base tzdata python3 sqlite-dev sqlite git
RUN git config --global url."https://".insteadOf ssh:// && chmod +x build.sh
RUN npm config set ssl-strict=false
#ENV NODE_ENV p
RUN rm -rf package-lock.json
RUN npm i -g npm@6.14.12
RUN npm cache verify && npm cache clean --force
RUN npm  install
RUN npm install @types/mongoose  @nestjs/swagger swagger-ui-express --force
EXPOSE 3000
