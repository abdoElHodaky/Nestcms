name: docker-push

on:
  push:
env:
 DOCKER_USER: ${{vars.DOCKER_USER}}
 DOCKER_PAT: ${{secrets.DOCKER_PA}}
jobs:
  docker:
    runs-on: ubuntu-latest
    steps:
      -
        name: Login to Docker Hub
        uses: docker/login-action@v3
        with:
          username: ${{ env.DOCKER_USER }}
          password: ${{ env.DOCKER_PAT }}
  
  build_and_push:
    runs-on: ubuntu-latest
    steps:
      - name: Build and Push Container to docker.io
        uses: GlueOps/github-actions-build-push-containers@v0.3.7
        with:
          registry: "docker.io"
          dockerhub_username: ${{ env.DOCKER_USER }}
          dockerhub_password: ${{ env.DOCKER_PAT }}
